<!-- Begin of cc_manual_header -->
<!-- ------------------------- -->
<!-- $Revision: 1.1 $ -->
<!-- $Date: 1997/05/09 12:27:08 $ -->

  <!-- CC manual page automatically extracted from a TeX specification -->
  <!-- in file Chapter_planar.html -->
  <!-- by cc_extract_html, $Revision: 2.18 $. -->

<!--  Title -->
  <HEAD>
  <TITLE>Reference Manual: </TITLE>
  </HEAD>

<!-- Background layout-->
  <BODY BGCOLOR="FAF8E8" TEXT="#000000">

<!-- Navigation -->
  <STRONG>Navigation:</STRONG>
  <A HREF="Chapter_planar.html">Up</A>,
  <A HREF="../contents.html">Table of Contents</A>,
  <A HREF="../biblio.html">Bibliography</A>,
  <A HREF="../manual_index.html">Index</A>,
  <A HREF="../title.html">Title Page</A>
<HR>

<!-- End of cc_manual_header -->
<H1>Planar Map</H1>
 <A NAME="I1_ChapterPlanarMap"></A><P>

<A NAME="Section_1"></A>
<H2>Introduction</H2>

<A NAME="PM_sec:intro"></A><P>

Our package is concerned with subdivisions of the plane induced by
collections of curves. In this section we briefly review the geometric
concepts underlying the data structures described in the following
sections.<P>

\paragraphCurve
We will use the term <I>curve</I> to describe the image of a continuous
<MATH>1-1</MATH> mapping into the plane of any one of the following: the
closed unit interval (arc), the open unit interval (unbounded curve),
or the unit circle (closed curve). In all cases a curve is non
self-intersecting.<P>

\paragraph<MATH>x</MATH>-Monotone curve
We say that a curve <MATH>c</MATH> is <MATH>x</MATH>-monotone if <MATH>c</MATH> either intersects
any vertical line in at most one point, or that <MATH>c</MATH> is a vertical
segment.<P>


<P>
<center><img border=0 src="./face.gif" alt=" "><br>
A face, an edge, and a vertex</center>
<P>

\paragraphPlanar subdivision (planar-map), vertex, edge, face
A planar subdivision (or planar-map) is an embedding of a planar graph
<MATH>G</MATH> into the plane, such that each arc of <MATH>G</MATH> is embedded as a
bounded curve. The image of a node of <MATH>G</MATH> is called a <EM>vertex</EM>,
and the image of an arc is called an <EM>edge</EM>. In this embedding no
pair of edges intersect in their interiors.<P>

A <EM>face</EM> of the subdivision is a maximal connected region of the
plane that does not contain any vertex or edge. See Figure
[ref:fig:face]. We consider a face to be open, and its boundary is
formed by vertices and edges of the subdivision.<P>

\paragraphIncidence
If a vertex <MATH>v</MATH> is an endpoint of an edge <MATH>e</MATH>, then we say that <MATH>v</MATH>
and <MATH>e</MATH> are <EM>incident</EM> to one another. Similarly, a face and an
edge on its boundary are incident, and a face and a vertex on its
boundary are incident.<P>

\paragraphHalf-edge, twin, source, target
We consider each edge <MATH>e</MATH> to be two-sided, representing it by two
directed <EM>half-edges</EM> <MATH>\vece</MATH> and <MATH><TT>Twin</TT>(\vece)</MATH>. A
half-edge <MATH>\vece</MATH> is an ordered pair <MATH>(u,v)</MATH> of its endpoints, and
it is directed from <MATH>u</MATH>, the <EM>source</EM>, to <MATH>v</MATH>, the <EM>target</EM>.
We consider each half edge to lie on the border of a single face - the
face lying to our left as we traverse the edge from source to target.<P>

\paragraphConnected Component of the Boundary (CCB)
Each connected component of the boundary of a face is represented by a
circular list of half-edges. The list of half-edges of the
outer boundary component of a face is oriented counterclockwise, and
the list for each inner boundary component is oriented clockwise, see
Figure [ref:fig:DCEL]. For a face <MATH>f</MATH> of a planar-map, we call each
connected component of the boundary of <MATH>f</MATH> a <EM>CCB</EM>. If <MATH>f</MATH> is
bounded, we call its outer boundary component the outer-CCB. Any other
connected component of the boundary of <MATH>f</MATH> is called a hole.<P>

\paragraphEdges Around a <A HREF="../Halfedge_DS/Vertex.html#Cross_link_anchor_1">Vertex</A>
Every maximal group of half-edges which share the same origin is represented
by a special object. It can be viewed as a circular list
of half-edges ordered clockwise
around their origin vertex.<P>


<P>
<center><img border=0 src="./dcel.gif" alt=" "><br>
DCEL</center>
<P>

\paragraphDoubly connected edge list (DCEL)
For a planar-map, its <EM>DCEL</EM> representation consists of a
connected list of half-edges for every CCB of every face in the
subdivision, with additional incidence information that enables us to
traverse the subdivision. In particular, for each half-edge the DCEL
stores a pointer to its twin edge and to the next
clockwise/counterclockwise half-edge with the same source. In
addition, for each half-edge the DCEL stores a pointer to the incident
face. See Figure [ref:fig:DCEL]. For more information about the DCEL
representations see [<A HREF="../biblio.html#Biblio_bkos-cgaa-97">dBvKOS97</A>]. In the following
specifications, we implement the subdivision by a DCEL.<P>

<A NAME="Section_2"></A>
<H2>Planar Map</H2>

<A NAME="PM_sec:pm"></A><P>

<UL><LI>
 Class declaration of <A HREF="CGAL_Planar_map_2.html"><I>CGAL_Planar_map_2&lt;Dcel,Traits&gt;</I></A>.</UL>

<P>

<UL><LI>
 Class declaration of <A HREF="CGAL_Planar_map_2.html"><I>CGAL_Planar_map_2&lt;Dcel,Traits&gt;::Vertex</I></A>.</UL>

<P>

<UL><LI>
 Class declaration of <A HREF="CGAL_Planar_map_2.html"><I>CGAL_Planar_map_2&lt;Dcel,Traits&gt;::Halfedge</I></A>.</UL>

<P>

<UL><LI>
 Class declaration of <A HREF="CGAL_Planar_map_2.html"><I>CGAL_Planar_map_2&lt;Dcel,Traits&gt;::Face</I></A>.</UL>

<P>

<UL><LI>
 Class declaration of <A HREF="CGAL_Planar_map_2.html"><I>CGAL_Planar_map_2&lt;Dcel,Traits&gt;::Ccb_halfedge_circulator</I></A>.</UL>

<P>

<UL><LI>
 Class declaration of <A HREF="CGAL_Planar_map_2.html"><I>CGAL_Planar_map_2&lt;Dcel,Traits&gt;::Halfedge_around_vertex_circulator</I></A>.</UL>

<P>

<A NAME="Section_3"></A>
<H2>Predefined Planar Map Interface Classes</H2>
<P>

The Planar Map Class is parameterized with the interface classes <I>Dcel</I>
and <I><A HREF="../Polygon/Traits.html#Cross_link_anchor_1">Traits</A></I>. <I>Dcel</I> defines the underlying combinatorical data
structure (halfedge structure) used by the planar map.
<I><A HREF="../Polygon/Traits.html#Cross_link_anchor_1">Traits</A></I> defines the abstract interface
between planar maps and the <EM>geometric</EM> primitives they use.
In the future we plan to supply the users with the formal requirements of
the interface class, so they can construct their own class. However, at
the moment only the predefined dcel and traits classes given below can be used as
parameters.<P>

We supply a default traits class for exact arithmetic  - <I><A HREF="CGAL_Pm_segment_exact_traits.html#Cross_link_anchor_7">CGAL_Pm_segment_exact_traits&lt;R&gt;</A></I><P>

where <I>R</I> is the representation type. There is also a class
for finite precision arithmetic  - <I><A HREF="CGAL_Pm_segment_epsilon_traits.html#Cross_link_anchor_8">CGAL_Pm_segment_epsilon_traits&lt;R&gt;</A></I>,
which is not recommended unless it is known that robustness issues will not
arise.
Both traits handle
finite line segments in the plane (<I>X_curve</I> is of type
<I>CGAL_segment_2&lt;R&gt;</I> and <I>Point</I> is of type
<I>CGAL_Point_2&lt;R&gt;</I>).<P>

<UL><LI>
 Class declaration of <A HREF="CGAL_Pm_default_dcel.html"><I>CGAL_Pm_default_dcel&lt;Traits&gt;</I></A>.</UL>

<P>

<UL><LI>
 Class declaration of <A HREF="CGAL_Pm_segment_exact_traits.html"><I>CGAL_Pm_segment_exact_traits&lt;R&gt;</I></A>.</UL>

<P>

<UL><LI>
 Class declaration of <A HREF="CGAL_Pm_segment_epsilon_traits.html"><I>CGAL_Pm_segment_epsilon_traits&lt;R&gt;</I></A>.</UL>

<P>

<A NAME="Section_4"></A>
<H2>Example Program</H2>

<A NAME="PM_sec:example"></A><P>


<P>
<center><img border=0 src="./example_p.gif" alt=" "><br>
The map generated by the example program</center>
<P>

The following program creates a planar map from five curves (see
figure [ref:PM_sec:example_pic]). It uses the floating-point
arithmetics interface class
(<I><A HREF="CGAL_Pm_segment_epsilon_traits.html#Cross_link_anchor_8">CGAL_Pm_segment_epsilon_traits&lt;R&gt;</A></I>). The first part of the
code initializes five segments. The next part inserts them to the map
and checks the validity of the map. In the last part, a vertical ray
shooting is performed from the point <MATH>p</MATH>.<P>

<PRE>
#include &lt;CGAL/Cartesian.h&gt;
#include &lt;CGAL/Pm_segment_epsilon_traits.h&gt;
#include &lt;CGAL/Pm_default_dcel.h&gt;
#include &lt;CGAL/Planar_map_2.h&gt;

typedef double                                           number_type;
typedef CGAL_Cartesian&lt;number_type&gt;                      coord_t;
typedef CGAL_Pm_segment_epsilon_traits&lt;coord_t&gt;          pmtraits;
typedef typename pmtraits::Point                         point;
typedef typename pmtraits::X_curve                       curve;

typedef CGAL_Pm_default_dcel&lt;pmtraits&gt;                   pmdcel;


int main()
{
  // creating an instance of <A HREF="CGAL_Planar_map_2.html#Cross_link_anchor_0">CGAL_Planar_map_2</A>&lt;pmdcel,pmtraits&gt;
  <A HREF="CGAL_Planar_map_2.html#Cross_link_anchor_0">CGAL_Planar_map_2</A>&lt;pmdcel,pmtraits&gt; pm;

  curve cv[5];
  int i;

  point a1(100, 0), a2(20, 50), a3(180, 50), a4(100, 100);

  // those curves are about to be inserted to pm
  cv[0] = curve(a1, a2);
  cv[1] = curve(a1, a3);
  cv[2] = curve(a2, a3);
  cv[3] = curve(a2, a4);
  cv[4] = curve(a3, a4);
  
  cout &lt;&lt; &quot;the curves of the map:&quot; &lt;&lt; endl; 
  for (i = 0; i &lt; 5; i++)
    cout &lt;&lt; cv[i] &lt;&lt; endl;

  cout &lt;&lt; endl;

  // insert the five curves to the map
  cout &lt;&lt; &quot;inserting the curves to the map...&quot; &lt;&lt; endl;
  for (i = 0; i &lt; 5; i++)
  {
    cout &lt;&lt; &quot;inserting curve&quot; &lt;&lt; i &lt;&lt; endl;
    pm.insert(cv[i]);
  }
  
  // check the validity of the map
  cout &lt;&lt; &quot;check map validity... &quot;;
  if (pm.is_valid())
    cout &lt;&lt; &quot;map valid!&quot; &lt;&lt; endl;
  else
    cout &lt;&lt; &quot;map invalid!&quot; &lt;&lt; endl;
  cout &lt;&lt; endl;
  
  // vertical ray shooting upward from p
  point p(95, 30);
  typename <A HREF="CGAL_Planar_map_2.html#Cross_link_anchor_0">CGAL_Planar_map_2</A>&lt;pmdcel,pmtraits&gt;::<A HREF="../Halfedge_DS/Halfedge.html#Cross_link_anchor_2">Halfedge</A> e;  
  typename <A HREF="CGAL_Planar_map_2.html#Cross_link_anchor_0">CGAL_Planar_map_2</A>&lt;pmdcel,pmtraits&gt;::Locate_type lt;

  cout &lt;&lt; endl &lt;&lt; &quot;upward vertical ray shooting from &quot; &lt;&lt; p &lt;&lt; endl; 
  e=pm.vertical_ray_shoot(p, lt, true);
  cout &lt;&lt; &quot;returned the edge:&quot; &lt;&lt; e &lt;&lt; endl;
  
  return 0;  
}

</PRE><P>

The output of this program is<P>

<PRE>
the curves of the map:
100 0 20 50
100 0 180 50
20 50 180 50
20 50 100 100
180 50 100 100

inserting the curves to the map...
inserting curve0
inserting curve1
inserting curve2
inserting curve3
inserting curve4
check map validity... map valid!

upward vertical ray shooting from 95 30
returned the edge: {(20 50)-&gt;(180 50)}
</PRE><P>

<!-- Begin of cc_manual_footer -->
<!-- ------------------------- -->
<!-- $Revision: 1.1 $ -->
<!-- $Date: 1997/05/09 12:27:08 $ -->

<!-- Navigation -->
<HR>
  <STRONG>Navigation:</STRONG>
  <A HREF="Chapter_planar.html">Up</A>,
  <A HREF="../contents.html">Table of Contents</A>,
  <A HREF="../biblio.html">Bibliography</A>,
  <A HREF="../manual_index.html">Index</A>,
  <A HREF="../title.html">Title Page</A>
<HR>

<address> 
  The <A HREF=http://www.cs.uu.nl/CGAL/>CGAL Project</A>.    Tue, April 21, 1998. 
</address>
</BODY>
</HTML>

<!-- End of cc_manual_footer -->
